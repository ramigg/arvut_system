<h2><%= t('admin.reports.manage_user_roles') %></h2>

<div id="to-admin">
  <%= form_tag(admin_roles_path, :method => :post) do %>
    <ul>
      <li>
        Email, First or Last Name of an existing user:
        <ul>
          <li>
            <%= text_field_tag :email, @email, :autocomplete => autocomplete_user_email_admin_roles_url %>
            <%= submit_tag t('views.load'), :name => 'load_user', :id => 'load_user', :class => 'button-small-main' %>
          </li>
        </ul>
      </li>
      <li>ID: <%= @user.try(:id) %></li>
      <li style="float: right; text-align: left; width: 700px;">Full Info<br/><pre><%= JSON.parse(@user.sn_data || '{}').to_yaml.html_safe -%></pre></li>
      <li>
        Roles:
        <ul>
          <% @all_roles.each_with_index do |r, idx| %>
            <% checked = @user ? @user.roles.include?(r) : false %>
            <li>
              <%= check_box_tag "role[#{idx}]", r.id, checked %> <label for="role_<%=idx%>"><%= r.role %></label>
            </li>
          <%- end -%>
        </ul>
      </li>
    </ul>
    <hr/>
    <%= submit_tag t('views.submit'), :class => 'button-small-main' %>
  <%- end %>
</div>
